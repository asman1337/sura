# Police Hierarchy and Authorization Flow Charts

## District Police Hierarchy

```
                      ┌───────────┐
                      │    DGP    │
                      └─────┬─────┘
                            │
                            ▼
                      ┌───────────┐
                      │  Addl DGP │
                      └─────┬─────┘
                            │
                            ▼
                      ┌───────────┐
                      │    IGP    │
                      └─────┬─────┘
                            │
                            ▼
                      ┌───────────┐
                      │    DIG    │
                      └─────┬─────┘
                            │
                            ▼
                      ┌───────────┐
                      │     SP    │ ◄─────── District Level (SP Office Unit)
                      └─────┬─────┘
                            │
                 ┌──────────┴──────────┐
                 │                     │
                 ▼                     ▼
          ┌─────────────┐      ┌─────────────┐
          │   Addl SP   │      │   Addl SP   │ ◄── Division Level (Addl SP Office Units)
          └──────┬──────┘      └──────┬──────┘
                 │                    │
        ┌────────┴────────┐  ┌────────┴────────┐
        │                 │  │                 │
        ▼                 ▼  ▼                 ▼
  ┌──────────┐     ┌──────────┐     ┌──────────┐
  │   Dy SP  │     │   Dy SP  │     │   Dy SP  │ ◄── Sub-Division Level (Dy SP Office Units)
  └─────┬────┘     └─────┬────┘     └─────┬────┘
        │                │                │
        ▼                ▼                ▼
  ┌──────────┐     ┌──────────┐     ┌──────────┐
  │   CI     │     │    CI    │     │    CI    │ ◄── Circle Level (Circle Office Units)
  └─────┬────┘     └─────┬────┘     └─────┬────┘
        │                │                │
    ┌───┴───┐        ┌───┴───┐        ┌───┴───┐
    │       │        │       │        │       │
    ▼       ▼        ▼       ▼        ▼       ▼
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│Inspector│ │Inspector│ │Inspector│ │Inspector│ ◄── Station Level (Police Station Units)
└────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘
     │           │           │           │
     │           │           │           │
     ▼           ▼           ▼           ▼
┌─────────────────────────────────────────────┐
│  Sub-Inspectors, ASIs, Head Constables,     │ ◄── Sub-Station Level (Outpost Units)
│  Constables, etc.                           │
└─────────────────────────────────────────────┘
```

## Commissionerate Police Hierarchy

```
                      ┌───────────┐
                      │    DGP    │
                      └─────┬─────┘
                            │
                            ▼
                      ┌───────────┐
                      │  Addl DGP │
                      └─────┬─────┘
                            │
                            ▼
                      ┌───────────┐
                      │    IGP    │
                      └─────┬─────┘
                            │
                            ▼
                      ┌───────────┐
                      │    DIG    │
                      └─────┬─────┘
                            │
                            ▼
                      ┌───────────┐
                      │     CP    │ ◄─────── Commissioner Level (CP Office Unit)
                      └─────┬─────┘
                            │
             ┌──────────────┼──────────────┐
             │              │              │
             ▼              ▼              ▼
      ┌────────────┐ ┌────────────┐ ┌────────────┐
      │  Joint CP  │ │  Joint CP  │ │  Addl CP   │ ◄── Zone Level (Jt/Addl CP Office Units)
      └──────┬─────┘ └──────┬─────┘ └──────┬─────┘
             │              │              │
       ┌─────┴─────┐  ┌─────┴─────┐  ┌─────┴─────┐
       │           │  │           │  │           │
       ▼           ▼  ▼           ▼  ▼           ▼
  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
  │   DCP   │ │   DCP   │ │   DCP   │ │   DCP   │ ◄── Division Level (DCP Office Units)
  └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘
       │           │           │           │
       ▼           ▼           ▼           ▼
  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
  │   ACP   │ │   ACP   │ │   ACP   │ │   ACP   │ ◄── Sub-Division Level (ACP Office Units)
  └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘
       │           │           │           │
    ┌──┴──┐     ┌──┴──┐     ┌──┴──┐     ┌──┴──┐
    │     │     │     │     │     │     │     │
    ▼     ▼     ▼     ▼     ▼     ▼     ▼     ▼
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│Inspector│ │Inspector│ │Inspector│ │Inspector│ ◄── Station Level (Police Station Units)
└────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘
     │           │           │           │
     │           │           │           │
     ▼           ▼           ▼           ▼
┌─────────────────────────────────────────────┐
│  Sub-Inspectors, ASIs, Head Constables,     │ ◄── Sub-Station Level (Outpost Units)
│  Constables, etc.                           │
└─────────────────────────────────────────────┘
```

## Units and Departments Structure

```
┌────────────────────┐
│    Organization    │
│ (District/Commiss) │
└─────────┬──────────┘
          │
          │  Has many
          ▼
┌────────────────────┐
│       Units        │◄───────┐
│ SP Office, PS, etc │        │ Parent-Child
└─────────┬──────────┘        │ Relationship
          │                   │
          │  Has many         │
          ▼                   │
┌────────────────────┐        │
│    Departments     │        │
│ (Within each unit) │        │
└─────────┬──────────┘        │
          │                   │
          │  Belongs to       │
          ▼                   │
┌────────────────────┐        │
│     Officers       │        │
│                    │────────┘
└────────────────────┘
      Assigned to
```

## Multi-Tenant Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                      SURA Application                           │
└───────────────────────────────┬─────────────────────────────────┘
                                │
                                ▼
            ┌─────────────────────────────────────────┐
            │         Tenant Management Layer         │
            └───────────────┬─────────────────────────┘
                            │
          ┌─────────────────┼─────────────────┐
          │                 │                 │
          ▼                 ▼                 ▼
┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
│  Tenant Schema  │ │  Tenant Schema  │ │  Tenant Schema  │
│  (District A)   │ │  (District B)   │ │ (Commissionerate)│
└────────┬────────┘ └────────┬────────┘ └────────┬────────┘
         │                   │                   │
         ▼                   ▼                   ▼
┌──────────────────────────────────────────────────────────┐
│                                                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐    │
│  │   Units      │  │  Departments │  │   Officers   │    │
│  │              │  │              │  │              │    │
│  └──────────────┘  └──────────────┘  └──────────────┘    │
│                                                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐    │
│  │    Roles     │  │ Permissions  │  │ Functional   │    │
│  │              │  │              │  │ Assignments  │    │
│  └──────────────┘  └──────────────┘  └──────────────┘    │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

## Authorization Flow

```
┌──────────────┐     ┌───────────────┐     ┌─────────────────┐
│  User Login  │────▶│ Authentication │────▶│ JWT with Tenant │
└──────────────┘     └───────────────┘     └────────┬────────┘
                                                    │
                                                    ▼
┌────────────────────────────────────────────────────────────────────┐
│                        Request Pipeline                            │
└────────────┬────────────────────────────────────────┬──────────────┘
             │                                        │
             ▼                                        ▼
┌───────────────────────────┐            ┌───────────────────────────┐
│    Tenant Middleware      │            │     Auth Guard            │
│ (Sets tenant context)     │            │ (Verifies JWT)            │
└─────────────┬─────────────┘            └─────────────┬─────────────┘
              │                                        │
              ▼                                        ▼
┌───────────────────────────┐            ┌───────────────────────────┐
│  Role-Based Access Guard  │◀───────────│   Permission Resolver     │
│ (Checks user roles)       │            │ (Loads user permissions)  │
└─────────────┬─────────────┘            └───────────────────────────┘
              │
              ▼
┌───────────────────────────┐            ┌───────────────────────────┐
│ Hierarchical Data Filter  │────────────▶    Controller/Service     │
│ (Officer jurisdiction)    │            │    (Business Logic)       │
└───────────────────────────┘            └───────────────────────────┘
```

## Functional Role Assignment Flow

```
┌───────────────┐     ┌───────────────────┐     ┌───────────────────┐
│  Unit Head    │────▶│ Assigns functional │────▶│ Officer receives  │
│  (SHO/CI/SP)  │     │ role to officer    │     │ functional role   │
└───────────────┘     └───────────────────┘     └─────────┬─────────┘
                                                          │
                                                          ▼
┌─────────────────────────────────┐     ┌───────────────────────────┐
│ System assigns permissions      │◀────│ Role-specific permissions │
│ based on functional role        │     │ get enabled for officer   │
└─────────────┬───────────────────┘     └───────────────────────────┘
              │
              ▼
┌─────────────────────────────────────────────────────────────────────┐
│                                                                     │
│  ┌───────────────┐     ┌───────────────┐     ┌───────────────┐     │
│  │   Malkhana    │     │  Complaints   │     │   Vehicles    │     │
│  │   Officer     │     │   Officer     │     │    Officer    │     │
│  └───────┬───────┘     └───────┬───────┘     └───────┬───────┘     │
│          │                     │                     │             │
│          ▼                     ▼                     ▼             │
│  ┌───────────────┐     ┌───────────────┐     ┌───────────────┐     │
│  │ Manage items  │     │Register/track │     │ Manage fleet  │     │
│  │ in Malkhana   │     │  complaints   │     │ & maintenance │     │
│  └───────────────┘     └───────────────┘     └───────────────┘     │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
``` 